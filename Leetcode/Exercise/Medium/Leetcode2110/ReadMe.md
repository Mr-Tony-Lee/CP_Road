# LeetCode 2110. Number of Smooth Descent Periods of a Stock

## 1. 核心數學概念：等差級數求和

題目定義「平滑下降期間」（Smooth Descent Period）為一段連續的子陣列，其中每一天的價格都比前一天少 1。

如果我們找到一段長度為 $L$ 的最長連續平滑下降區間（例如 `[3, 2, 1]`，長度 $L=3$），那麼這段區間內包含的所有子陣列（例如 `[3]`, `[2]`, `[1]`, `[3, 2]`, `[2, 1]`, `[3, 2, 1]`）都符合平滑下降的定義。

長度為 $L$ 的區間，其包含的符合條件子陣列總數為 $1 + 2 + \dots + L$，根據等差級數公式可得：
$$
\text{Total} = \frac{L \times (L+1)}{2}
$$

## 2. 解題策略：線性掃描 (Linear Scan)

我們只需要遍歷一次陣列，找出所有不重疊的「最長」平滑下降區段，並利用上述公式計算個數。

### 演算法步驟

1.  初始化 `cnt = 1`（代表當前下降區段的長度），`ans = 0`。
2.  遍歷陣列 `prices`：
    *   若當前價格 `p` 與前一天價格 `prev` 滿足 `prev - p == 1`，則將 `cnt` 加 1。
    *   若不滿足，表示前一段下降區段結束：
        *   將前一段的貢獻值 $\frac{cnt \times (cnt+1)}{2}$ 加入 `ans`。
        *   重置 `cnt = 1`（當前元素重新開始一段）。
3.  迴圈結束後，將最後一段的貢獻值加入 `ans`。

### 複雜度分析

*   **時間複雜度：** $O(N)$，只需要遍歷一次陣列。
*   **空間複雜度：** $O(1)$，只使用了常數個變數。
